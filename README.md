# üöÄ SuporteEficiente - Sistema de Multiatendimento WhatsApp

<div align="center">
  <img src="backend/public/logotipos/login.png" alt="Whaticket Logo" width="200"/>
  
  [![Node.js](https://img.shields.io/badge/node.js-%3E%3D20.0.0-brightgreen)](https://nodejs.org/)
  [![React](https://img.shields.io/badge/react-17.0.1-blue)](https://reactjs.org/)
  [![TypeScript](https://img.shields.io/badge/typescript-4.6.3-blue)](https://www.typescriptlang.org/)
  [![License](https://img.shields.io/badge/license-Commercial-red)](https://painel.suporteeficiente.com.br)
  
  **Sistema profissional de atendimento ao cliente via WhatsApp com automa√ß√£o inteligente e recursos avan√ßados**
  
  <!-- [üõí Comprar Licen√ßa](https://painel.suporteeficiente.com.br) --> 
  [üíº Programa de Revenda](https://painel.suporteeficiente.com.br/register.php) ‚Ä¢ [üìß Suporte](https://chat.whatsapp.com/JM4oOAc9cxH8WzspShRz9q?mode=hqrt1)
  
</div>

---

## üìã Sobre o Projeto

O **SuporteEficiente** √© uma solu√ß√£o completa e profissional de multiatendimento desenvolvida para empresas que buscam excel√™ncia no atendimento ao cliente via WhatsApp. Com tecnologia de ponta e recursos avan√ßados de automa√ß√£o, o sistema permite gerenciar m√∫ltiplas conversas simultaneamente, automatizar respostas inteligentes e integrar-se perfeitamente com seus sistemas existentes.

### üéØ Diferenciais Competitivos

- ‚úÖ **Integra√ß√£o Nativa com WuzAPI** - Conecte-se ao WhatsApp usando a tecnologia mais est√°vel e confi√°vel do mercado
- ‚úÖ **FlowBuilder Visual** - Crie fluxos de automa√ß√£o complexos sem escrever c√≥digo, com interface drag-and-drop intuitiva
- ‚úÖ **Webhooks Avan√ßados** - Integre facilmente com sistemas externos e automatize processos de neg√≥cio
- ‚úÖ **Multi-tenant Completo** - Suporte a m√∫ltiplas empresas em uma √∫nica instala√ß√£o
- ‚úÖ **API RESTful Completa** - Integre com qualquer sistema atrav√©s de endpoints completos
- ‚úÖ **Dashboard Analytics** - Relat√≥rios detalhados e m√©tricas em tempo real para tomada de decis√£o

---

## ‚ú® Principais Funcionalidades

### ü§ñ Automa√ß√£o Inteligente

- **FlowBuilder Visual** - Crie fluxos de conversa√ß√£o complexos com interface visual intuitiva
  - N√≥s de mensagem, menu, condi√ß√µes, intervalos e muito mais
  - Suporte a vari√°veis din√¢micas e templates personalizados
  - Integra√ß√£o com OpenAI para respostas inteligentes
  - Fluxos condicionais e ramifica√ß√µes avan√ßadas
  
- **Bots e Assistentes Virtuais** - Configure respostas autom√°ticas inteligentes
  - Integra√ß√£o com IA para respostas contextuais
  - Respostas r√°pidas pr√©-configuradas
  - Mensagens de boas-vindas e despedida personalizadas

### üîó Integra√ß√µes Poderosas

- **WuzAPI/Whatsmeow** - Integra√ß√£o nativa com a plataforma mais est√°vel para WhatsApp
  - Suporte a m√∫ltiplas conex√µes simult√¢neas
  - Gerenciamento de sess√µes robusto
  - Sincroniza√ß√£o autom√°tica de contatos e mensagens
  
- **Webhooks Avan√ßados** - Conecte-se com qualquer sistema externo
  - Disparo de fluxos via webhook
  - Mapeamento de vari√°veis personalizado
  - Processamento ass√≠ncrono de requisi√ß√µes
  - Estat√≠sticas e monitoramento de requisi√ß√µes

### üë• Gest√£o de Equipe

- **M√∫ltiplos Atendentes** - Gerencie equipes de qualquer tamanho
  - Sistema de filas por departamento/setor
  - Distribui√ß√£o autom√°tica de tickets
  - Transfer√™ncia entre atendentes
  - Permiss√µes granulares por perfil

- **Sistema de Tags** - Organize e categorize contatos e conversas
  - Tags personalizadas por empresa
  - Filtros avan√ßados por tags
  - Relat√≥rios segmentados

### üìä Analytics e Relat√≥rios

- **Dashboard Completo** - Visualize m√©tricas importantes em tempo real
  - Tickets abertos/fechados
  - Tempo m√©dio de resposta
  - Taxa de satisfa√ß√£o
  - Gr√°ficos e estat√≠sticas detalhadas

- **Relat√≥rios Avan√ßados** - Exporte dados para an√°lise
  - Relat√≥rios de atendimento
  - Hist√≥rico completo de conversas
  - M√©tricas de performance por atendente

### üéØ Campanhas e Marketing

- **Campanhas de Mensagens** - Envie mensagens em massa de forma eficiente
  - Agendamento de envios
  - Personaliza√ß√£o com vari√°veis
  - Controle de taxa de envio
  - Relat√≥rios de entrega

### üîê Seguran√ßa e Confiabilidade

- **Autentica√ß√£o JWT** - Sistema seguro de autentica√ß√£o
- **Multi-tenant** - Isolamento completo entre empresas
- **Backup Autom√°tico** - Prote√ß√£o de dados garantida
- **Logs Detalhados** - Rastreabilidade completa de a√ß√µes

---

## üõ†Ô∏è Tecnologias Utilizadas

### Backend
- **Node.js** + **TypeScript** - Performance e type-safety
- **Express.js** - Framework web robusto
- **Sequelize** - ORM para PostgreSQL
- **Socket.io** - Comunica√ß√£o em tempo real
- **Bull** - Processamento de filas ass√≠ncronas
- **Redis** - Cache e gerenciamento de sess√µes
- **PostgreSQL** - Banco de dados relacional

### Frontend
- **React** - Interface moderna e responsiva
- **Material-UI** - Componentes profissionais
- **Socket.io Client** - Atualiza√ß√µes em tempo real
- **Chart.js** - Visualiza√ß√µes e gr√°ficos
- **React Flow** - Editor visual de fluxos

---

## üöÄ Instala√ß√£o

### Pr√©-requisitos

- **Node.js** >= 20.0.0
- **PostgreSQL** (banco de dados obrigat√≥rio)
- **Redis**
- **Servidor Linux** (recomendado Ubuntu 20.04+)
- **Dom√≠nio** com SSL configurado

### 1. Instala√ß√£o do WuzAPI

O sistema requer a instala√ß√£o do **WuzAPI** em um subdom√≠nio separado ou como proxy reverso.

```bash
# Clone o reposit√≥rio do WuzAPI
git clone https://github.com/asternic/wuzapi.git
cd wuzapi

# Siga as instru√ß√µes de instala√ß√£o do WuzAPI
# Configure o WuzAPI em um subdom√≠nio (ex: wuzapi.seudominio.com)
# ou configure como proxy reverso no Nginx
```

**Importante:** Configure o WuzAPI para ser acess√≠vel via proxy reverso no mesmo dom√≠nio principal.

### 2. Clone e Instala√ß√£o do Projeto

```bash
# Clone o reposit√≥rio
git clone https://github.com/AgilizaWeb/SuporteEficiente.git
```

### 2.1 Instala√ß√£o do Backend
```bash

cd SuporteEficiente/backend

# Instale as depend√™ncias
npm install

# Copie o arquivo de configura√ß√£o
cp .env.example .env

# Edite o arquivo .env com suas configura√ß√µes
# Configure: banco de dados, Redis, JWT secrets, WuzAPI URL, etc.
nano .env
# Execute as migrations
npm run db:migrate

# Execute os seeds para dados iniciais
npm run db:seed
```

### 2.2 Instala√ß√£o do Frontend
```bash
cd ../frontend

# Instale as depend√™ncias (apenas se for rebuildar)
npm install
```

**Nota:** O frontend j√° vem compilado e pronto para uso. Para ajustar URLs, cores ou nomes do sistema, edite `build/env-config.js` alterando as chaves `REACT_APP_*`. N√£o √© necess√°rio recompilar para aplicar essas configura√ß√µes em produ√ß√£o.

### 3. Configura√ß√£o do Nginx (Recomendado)

Configura√ß√£o otimizada com proxy reverso para Backend e WuzAPI no mesmo dom√≠nio, com suporte completo para Socket.IO:

```nginx
    server {
        listen 80;
        server_name seudominio.com;
        
        # Frontend - Raiz do dom√≠nio
        location / {
            proxy_pass http://localhost:8002;
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-Proto $scheme;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Host $host;
            proxy_set_header X-Forwarded-Server $host;
            proxy_cache_bypass $http_upgrade;
        }
        
        # Socket.IO - DEVE vir antes de /api para ter prioridade
        location /api/socket.io {
            proxy_pass http://localhost:8080/socket.io;
            proxy_http_version 1.1;
            
            # Headers essenciais para WebSocket/Socket.IO
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
            proxy_set_header X-Forwarded-Host $host;
            proxy_set_header X-Forwarded-Server $host;
            
            # Cache bypass para WebSocket
            proxy_cache_bypass $http_upgrade;
            
            # Timeouts para conex√µes WebSocket persistentes
            proxy_read_timeout 300s;
            proxy_connect_timeout 75s;
            proxy_send_timeout 300s;
            
            # Buffer settings para WebSocket
            proxy_buffering off;
        }
        
        # Backend API - Proxy reverso
        location /api/ {
            proxy_pass http://localhost:8080/;
            proxy_http_version 1.1;
            
            # Headers padr√£o
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
            proxy_set_header X-Forwarded-Host $host;
            proxy_set_header X-Forwarded-Server $host;
            
            # Headers para WebSocket (caso alguma rota precise)
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            proxy_cache_bypass $http_upgrade;
            
            # Timeouts
            proxy_read_timeout 300s;
            proxy_connect_timeout 75s;
        }
        
        # WuzAPI - Proxy reverso
        location /wuzapi {
            proxy_pass http://localhost:8081;  # Porta do WuzAPI
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
            proxy_cache_bypass $http_upgrade;
            
            # Reescrever /wuzapi para remover o prefixo
            rewrite ^/wuzapi/(.*)$ /$1 break;
        }
    }
```

**Nota Importante:** 
- A location `/api/socket.io` **DEVE** vir antes de `/api/` para ter prioridade
- N√£o √© necess√°rio usar `map` para `$connection_upgrade` - use diretamente `"upgrade"` no header Connection
- Esta configura√ß√£o √© compat√≠vel com todas as vers√µes do Nginx

**Importante:** 
- Configure a URL do WuzAPI no `.env` do backend como: `WUZAPI_URL=https://seudominio.com/wuzapi`
- Configure a URL do backend no `.env` do frontend como: `REACT_APP_BACKEND_URL=https://seudominio.com/api`
- Ajuste a porta do WuzAPI (8081) conforme sua instala√ß√£o
- **Socket.IO**: A configura√ß√£o acima j√° inclui suporte completo para Socket.IO atrav√©s do proxy reverso

### 4. Iniciar o Sistema

#### Usando PM2 (Recomendado)

```bash
# Instale o PM2 globalmente
npm install -g pm2

# Navegue at√© a raiz do projeto
cd /caminho/para/SuporteEficiente

# Inicie todos os servi√ßos usando o ecosystem.config.js
pm2 start ecosystem.config.js

# Salve a configura√ß√£o para iniciar automaticamente com o sistema
pm2 save

# Configure o PM2 para iniciar no boot do sistema
pm2 startup
# Execute o comando que ser√° exibido no terminal
```

#### Usando Node diretamente

```bash
# Backend
cd backend
node -r bytenode dist/server.jsc

# Frontend
cd frontend
node server.js
```

---

## üìñ Primeiros Passos

### 1. Acesse o Sistema

Abra seu navegador e acesse: `https://seudominio.com`

### 2. Crie sua Conta de Administrador

Na primeira execu√ß√£o, voc√™ ser√° redirecionado para criar sua conta de administrador.

### 3. Configure uma Conex√£o WhatsApp

1. Acesse **Conex√µes** no menu
2. Clique em **Adicionar Conex√£o**
3. Preencha:
   - **Nome**: Nome da conex√£o
   - **Provider**: Selecione **WuzAPI**
4. Salve e aguarde a conex√£o ser estabelecida

### 4. Configure o FlowBuilder (Opcional)

1. Acesse **FlowBuilder** no menu
2. Clique em **Criar Novo Fluxo**
3. Use a interface visual para criar seu fluxo de automa√ß√£o
4. Conecte os n√≥s conforme sua necessidade
5. Ative o fluxo quando estiver pronto

### 5. Configure Webhooks (Opcional)

1. Acesse **Webhooks** no menu
2. Crie um novo webhook
3. Configure o mapeamento de vari√°veis
4. Associe um fluxo para ser disparado
5. Use a URL gerada em seus sistemas externos

---

## üîë Licenciamento

Este sistema √© distribu√≠do sob licen√ßa comercial. Para uso em produ√ß√£o, √© necess√°rio adquirir uma licen√ßa v√°lida.

### üí≥ Comprar Licen√ßa

- **Licen√ßa por Dom√≠nio**: V√°lida por 1 ano por dom√≠nio
- **Programa de Revenda**: Oportunidade de revender o sistema

**Acesse:** [https://painel.suporteeficiente.com.br](https://painel.suporteeficiente.com.br)

### üìã Benef√≠cios da Licen√ßa

- ‚úÖ Suporte t√©cnico priorit√°rio
- ‚úÖ Atualiza√ß√µes e corre√ß√µes de seguran√ßa

---

## üéì Recursos Principais em Detalhes

### üîÑ FlowBuilder - Automa√ß√£o Visual

O FlowBuilder permite criar fluxos de conversa√ß√£o complexos sem conhecimento de programa√ß√£o:

- **N√≥s Dispon√≠veis**:
  - Mensagem de texto
  - Menu interativo
  - Condi√ß√µes e ramifica√ß√µes
  - Intervalos e delays
  - Integra√ß√£o com OpenAI
  - Tags autom√°ticas
  - Transfer√™ncia de fila
  - E muito mais!

- **Vari√°veis Din√¢micas**: Use `{{variavel}}` em mensagens para personaliza√ß√£o
- **Fluxos Condicionais**: Crie l√≥gicas complexas com condi√ß√µes
- **Reutiliza√ß√£o**: Duplique e reutilize fluxos existentes

### üîó Webhooks - Integra√ß√£o Externa

Conecte o sistema com qualquer aplica√ß√£o externa:

- **Disparo de Fluxos**: Inicie conversas automaticamente via webhook
- **Mapeamento de Vari√°veis**: Configure como os dados externos s√£o mapeados
- **Processamento Ass√≠ncrono**: Requisi√ß√µes s√£o processadas em background
- **Estat√≠sticas**: Monitore requisi√ß√µes e sucesso de integra√ß√µes

### üì± WuzAPI - Integra√ß√£o WhatsApp

O sistema utiliza WuzAPI para conex√£o est√°vel com WhatsApp:

- **M√∫ltiplas Inst√¢ncias**: Gerencie v√°rias conex√µes simultaneamente
- **Sincroniza√ß√£o Autom√°tica**: Contatos e mensagens sincronizados automaticamente
- **Alta Disponibilidade**: Arquitetura robusta e confi√°vel
- **Suporte Completo**: Todos os tipos de m√≠dia suportados

---

### üêõ Reportar Problemas

Para reportar bugs, solicitar funcionalidades ou obter suporte t√©cnico, utilize o sistema de tickets do painel. Nossa equipe est√° sempre pronta para ajudar.

---

## üîÑ Atualiza√ß√µes e Manuten√ß√£o

### üì¶ Pol√≠tica de Atualiza√ß√µes

O sistema recebe **atualiza√ß√µes regulares** com novas funcionalidades, corre√ß√µes de bugs e melhorias de seguran√ßa. Clientes com licen√ßa ativa recebem:

- ‚úÖ **Atualiza√ß√µes de Seguran√ßa**: Corre√ß√µes cr√≠ticas e patches de seguran√ßa
- ‚úÖ **Novas Funcionalidades**: Melhorias e novos recursos constantemente adicionados
- ‚úÖ **Otimiza√ß√µes de Performance**: Melhorias cont√≠nuas na velocidade e efici√™ncia
- ‚úÖ **Compatibilidade**: Garantia de compatibilidade com novas vers√µes de depend√™ncias

### üîÑ Processo de Atualiza√ß√£o

Para atualizar o sistema:

```bash
# No diret√≥rio do projeto
git pull

# Execute as migrations do banco de dados (IMPORTANTE)
cd backend
npm run db:migrate

# Reinicie os servi√ßos
pm2 restart all
```

**Importante:** Sempre execute `npm run db:migrate` ap√≥s atualizar para garantir que o banco de dados est√° sincronizado com as √∫ltimas altera√ß√µes.

 Sempre confira as releases para saber se precisa de comandos/cuidados extras para a atualiza√ß√£o

### ‚ö†Ô∏è Recomenda√ß√µes Importantes

- **Backup Antes de Atualizar**: Sempre fa√ßa backup do banco de dados antes de atualizar
- **Ambiente de Teste**: Teste atualiza√ß√µes em ambiente de desenvolvimento primeiro
- **Hor√°rio de Baixo Tr√°fego**: Execute atualiza√ß√µes em hor√°rios de menor movimento
- **Monitoramento**: Acompanhe os logs ap√≥s atualiza√ß√µes para garantir que tudo est√° funcionando

### üìÖ Ciclo de Atualiza√ß√µes

- **Atualiza√ß√µes de Seguran√ßa**: Liberadas imediatamente quando necess√°rio
- **Atualiza√ß√µes de Funcionalidades**: Lan√ßadas regularmente conforme desenvolvimento
- **Atualiza√ß√µes Maiores**: Comunicadas com anteced√™ncia para planejamento

---

## üèÜ Por que Escolher o SuporteEficiente?

‚úÖ **Tecnologia de Ponta** - Desenvolvido com as melhores pr√°ticas e tecnologias modernas  
‚úÖ **Alta Performance** - Otimizado para lidar com milhares de conversas simult√¢neas  
‚úÖ **Seguran√ßa** - C√≥digo compilado e ofuscado para m√°xima prote√ß√£o  
‚úÖ **Escalabilidade** - Arquitetura preparada para crescer com seu neg√≥cio  
‚úÖ **Suporte Profissional** - Equipe dedicada para ajudar voc√™ a ter sucesso  
‚úÖ **Atualiza√ß√µes Constantes** - Sistema sempre evoluindo com novas funcionalidades  

---

## üë• Desenvolvedores

O **SuporteEficiente** √© desenvolvido por uma equipe dedicada de profissionais:

- [**Alisson Santos**](https://github.com/AgilizaWeb) - Desenvolvedor
- [**Paulo Carvalho**](https://github.com/Paulo7890) - Desenvolvedor

---

<div align="center">
  
  **Desenvolvido com ‚ù§Ô∏è para transformar o atendimento ao cliente**
  
  <!-- [üõí Comprar Licen√ßa Agora](https://painel.suporteeficiente.com.br) --> 
  [üíº Seja um Revendedor](https://painel.suporteeficiente.com.br/register.php)
  
  ‚≠ê **Transforme seu atendimento hoje mesmo!**
  
</div>
